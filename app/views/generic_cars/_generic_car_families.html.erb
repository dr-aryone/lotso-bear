<h2>Familias relacionadas</h2>

<table class="table table-striped">
  <thead>
    <th></th>
    <th>Nombre</th>
    <th>Codigo</th>
    <th>Variante</th>
    <th>Editar</th>
  </thead>
  <tbody>

  <% @generic_car.generic_families.each do |generic_family| %>
  <% spares_to_hide = "#{generic_family.id}#{Time.now.strftime('%d%h%m%s%L')}"  %>
      <tr>
        <td><input value="Spares" type="button" id="hidden_<%=spares_to_hide%>" class="hide_spares"/></td>
        <td><%= generic_family.name %></td>
        <td><%= generic_family.code %></td>
        <td><%= link_to "Crear Variante", variant_generic_family_path(generic_family, @generic_car) %></td>
        <td><%= link_to "Editar Familia", edit_generic_family_path(generic_family) %></td>
      </tr>
<% generic_family.spare_likelihoods.each do |spare_likelihood| %>
  <tr style="display:none" class="<%=spares_to_hide%>" >
    <td></td>
    <td><%= spare_likelihood.generic_spare.name %></td>
    <td><%= spare_likelihood.generic_spare.code %></td>
    
  </tr>
 
<% end %> 

 <script type="text/javascript">

   $("#hidden_<%=spares_to_hide%>").on("click",function() {

      console.log(""+$(this).parent().parent().next().attr("class"));
      $("tr."+$(this).parent().parent().next().attr("class")).toggle();
      
    });

</script> 
  <% end %>
</tbody>
</table>

